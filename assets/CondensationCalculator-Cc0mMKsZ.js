import{i as e,n as t,r as n,t as r}from"./index-D2EKJX5I.js";import{c as i,d as a,i as o,l as s,o as c,t as l,u}from"./useHeatTransferCoefficient-CYqBK-kg.js";import{n as d,r as f,t as p}from"./condensation-C_SvT-l6.js";import{n as m,t as h}from"./LabeledSelect-BPqtQYiY.js";import{t as g}from"./calculatorStore-B7Of4Ove.js";var _=e(n()),v=e(r()),y=({isOpen:e,onClose:t,ambientTemp:n,mediumTemp:r,tubeDiameter:i,material:a,modalParams:o,setModalParams:s,onCalculate:c})=>e?(0,v.jsx)(`div`,{className:u.modal,children:(0,v.jsxs)(`div`,{className:u.modal__container,children:[(0,v.jsx)(`div`,{className:u.modal__header,children:(0,v.jsx)(`h1`,{className:u.modal__header_title,children:`Calculation of Heat Transfer Coefficient h`})}),(0,v.jsxs)(`div`,{className:u.modal__content,children:[(0,v.jsxs)(`div`,{className:u.modal__section,children:[(0,v.jsx)(`h2`,{className:u.modal__section_title,children:`Calculation Type`}),(0,v.jsxs)(`div`,{className:u.modal__grid,children:[(0,v.jsxs)(`div`,{className:u.modal__field,children:[(0,v.jsx)(`label`,{className:u.modal__field_label,children:`Calculation Type`}),(0,v.jsxs)(`div`,{className:u.modal__field_radioGroup,children:[(0,v.jsxs)(`label`,{className:u.modal__field_radio,children:[(0,v.jsx)(`input`,{type:`radio`,name:`calculationType`,value:`inside`,checked:o.calculationType===`inside`,onChange:e=>s({...o,calculationType:e.target.value}),className:u.modal__field_radio_input}),(0,v.jsx)(`span`,{className:u.modal__field_radio_label,children:`inside`})]}),(0,v.jsxs)(`label`,{className:u.modal__field_radio,children:[(0,v.jsx)(`input`,{type:`radio`,name:`calculationType`,value:`outside`,checked:o.calculationType===`outside`,onChange:e=>s({...o,calculationType:e.target.value}),className:u.modal__field_radio_input}),(0,v.jsx)(`span`,{className:u.modal__field_radio_label,children:`outside`})]})]}),(0,v.jsx)(`span`,{className:u.helpTextTop,children:`what we calculate: heat released outward or inward`})]}),(0,v.jsxs)(`div`,{className:u.modal__field,children:[(0,v.jsx)(`label`,{className:u.modal__field_label,children:`Orientation`}),(0,v.jsxs)(`div`,{className:u.modal__field_radioGroup,children:[(0,v.jsxs)(`label`,{className:u.modal__field_radio,children:[(0,v.jsx)(`input`,{type:`radio`,name:`orientation`,value:`vertical`,checked:o.orientation===`vertical`,onChange:e=>s({...o,orientation:e.target.value}),className:u.modal__field_radio_input}),(0,v.jsx)(`span`,{className:u.modal__field_radio_label,children:`vertical`})]}),(0,v.jsxs)(`label`,{className:u.modal__field_radio,children:[(0,v.jsx)(`input`,{type:`radio`,name:`orientation`,value:`horizontal`,checked:o.orientation===`horizontal`,onChange:e=>s({...o,orientation:e.target.value}),className:u.modal__field_radio_input}),(0,v.jsx)(`span`,{className:u.modal__field_radio_label,children:`horizontal`})]})]})]})]})]}),(0,v.jsxs)(`div`,{className:u.modal__section,children:[(0,v.jsx)(`h2`,{className:u.modal__section_title,children:`Parameters`}),(0,v.jsxs)(`div`,{className:u.modal__grid,children:[(0,v.jsxs)(`div`,{className:u.modal__field,children:[(0,v.jsx)(`label`,{className:u.modal__field_label,children:`ambient temperature`}),(0,v.jsx)(`span`,{className:u.helpText,children:`air around insulation, °C`}),(0,v.jsx)(`input`,{type:`number`,value:n,readOnly:!0,className:`${u.modal__field_input} ${u.modal__field_input_readonly}`}),(0,v.jsx)(`span`,{className:u.modal__field_unit,children:`°C`})]}),(0,v.jsxs)(`div`,{className:u.modal__field,children:[(0,v.jsx)(`label`,{className:u.modal__field_label,children:`medium temperature`}),(0,v.jsx)(`span`,{className:u.helpText,children:`heat carrier inside pipe, °C`}),(0,v.jsx)(`input`,{type:`number`,value:r,readOnly:!0,className:`${u.modal__field_input} ${u.modal__field_input_readonly}`}),(0,v.jsx)(`span`,{className:u.modal__field_unit,children:`°C`})]}),(0,v.jsxs)(`div`,{className:u.modal__field,children:[(0,v.jsx)(`label`,{className:u.modal__field_label,children:`pipe diameter`}),(0,v.jsx)(`span`,{className:u.helpText,children:`outer diameter, mm`}),(0,v.jsx)(`input`,{type:`number`,value:i,readOnly:!0,className:`${u.modal__field_input} ${u.modal__field_input_readonly}`}),(0,v.jsx)(`span`,{className:u.modal__field_unit,children:`mm`})]}),(0,v.jsxs)(`div`,{className:u.modal__field,children:[(0,v.jsx)(`label`,{className:u.modal__field_label,children:`insulation material`}),(0,v.jsx)(`span`,{className:u.helpText,children:`sets thermal conductivity λ(T)`}),(0,v.jsx)(`input`,{type:`text`,value:a,readOnly:!0,className:`${u.modal__field_input} ${u.modal__field_input_readonly}`})]}),(0,v.jsxs)(`div`,{className:u.modal__field,children:[(0,v.jsx)(`label`,{className:u.modal__field_label,children:`emissivity coefficient (see help)`}),(0,v.jsx)(`span`,{className:u.helpText,children:`surface emissivity (0…1)`}),(0,v.jsx)(`input`,{type:`number`,value:o.emissivity,onChange:e=>s({...o,emissivity:+e.target.value}),className:u.modal__field_input,min:`0`,max:`1`,step:`0.01`})]})]})]}),(0,v.jsxs)(`div`,{className:u.modal__controls,children:[(0,v.jsx)(`button`,{onClick:c,className:`${u.modal__button} ${u.modal__button_primary}`,children:`Continue`}),(0,v.jsx)(`button`,{onClick:t,className:`${u.modal__button} ${u.modal__button_secondary}`,children:`Cancel`})]})]})]})}):null,b=()=>{let e=t(),{ambientTemp:n,mediumTemp:r,tubeDiameter:u,material:b,h:x,orientation:S,emissivity:C,setAmbientTemp:w,setMediumTemp:T,setTubeDiameter:E,setMaterial:D,setH:O,setOrientation:k,setEmissivity:A}=g(),[j,M]=(0,_.useState)(60),[N,P]=(0,_.useState)(!1),[F,I]=(0,_.useState)(!0),[L,R]=(0,_.useState)({dewpointTemperature:0,minimumThickness:0,nominalThickness:``}),[,z]=(0,_.useState)(!1),[B,V]=(0,_.useState)(!1),[H,U]=(0,_.useState)({calculationType:`inside`,orientation:S,emissivity:C}),[W,G]=(0,_.useState)(!1),K=()=>{if(!(j<=0||j>100||x<=0))try{let e=p(n,j),t=d(u,n,r,e,b,x),a=Math.ceil(t*1.2),s=o.find(e=>e.mm===u),c=s&&s.wallThicknesses?Object.keys(s.wallThicknesses).map(Number).sort((e,t)=>e-t):[6,9,13,19,25,32],l=c.find(e=>e>=a)||c[c.length-1],f=``;f=s?`${i(s)} - ${l}mm`:`${l}x25mm`,R({dewpointTemperature:e,minimumThickness:t,nominalThickness:f}),z(!0)}catch(e){e instanceof Error?alert(e.message):alert(`Произошла ошибка при расчёте. Проверьте входные параметры.`)}},q=()=>{U({calculationType:`inside`,orientation:S,emissivity:C}),V(!0)},J=()=>{G(!0)},Y=()=>{let{calculationType:e,orientation:t,emissivity:i}=H,a=l({ambientTemp:n,mediumTemp:r,tubeDiameter:u,orientation:t,emissivity:i,calculationType:e,insulationThickness:9,useSimplifiedFormula:!1,applySafetyFactor:N,useAdvancedAlgorithm:!1,useAdvancedSheetsAlgorithm:!1,useKFlexAlgorithm:!0,forCondensation:!0});O(a),k(t),A(i),V(!1)},X=()=>{g.getState().setMany({ambientTemp:25,mediumTemp:-5,tubeDiameter:25,material:`ROKAFLEX ST`,h:9,orientation:`horizontal`,emissivity:.93}),M(60),R({dewpointTemperature:0,minimumThickness:0,nominalThickness:``}),z(!1),V(!1),G(!1),U({calculationType:`inside`,orientation:`horizontal`,emissivity:.93}),e(`/`)},Z={heatLossCalculator__field:a.heatLossCalculator__field,heatLossCalculator__field_label:a.heatLossCalculator__field_label,heatLossCalculator__field_input:a.heatLossCalculator__field_input,heatLossCalculator__field_unit:a.heatLossCalculator__field_unit,helpTextTall:a.helpTextTall};return(0,v.jsxs)(`div`,{className:a.heatLossCalculator,children:[(0,v.jsxs)(`div`,{className:a.heatLossCalculator__container,children:[(0,v.jsx)(`div`,{className:a.heatLossCalculator__header,children:(0,v.jsx)(`h1`,{className:a.heatLossCalculator__header_title,children:`Condensation Prevention for Pipes`})}),(0,v.jsxs)(`div`,{className:a.heatLossCalculator__content,children:[(0,v.jsxs)(`div`,{className:a.heatLossCalculator__section,children:[(0,v.jsx)(`h2`,{className:a.heatLossCalculator__section_title,children:`Parameters`}),(0,v.jsxs)(`div`,{className:a.heatLossCalculator__grid,children:[(0,v.jsx)(m,{label:`ambient temperature`,helpText:`air around insulation, °C`,unit:`°C`,value:n,onChange:w,styles:Z}),(0,v.jsx)(m,{label:`medium temperature`,helpText:`heat carrier inside pipe, °C`,unit:`°C`,value:r,onChange:T,styles:Z}),(0,v.jsx)(h,{label:`pipe diameter`,helpText:`outer diameter, mm (Cu/St equivalents shown)`,unit:`mm`,value:u,onChange:e=>E(+e),styles:Z,options:o.map(e=>({value:e.mm,label:i(e)}))}),(0,v.jsx)(h,{label:`thermal insulation material`,helpText:`sets thermal conductivity λ(T)`,value:b,onChange:e=>D(String(e)),styles:Z,options:Object.keys(c).map(e=>({value:e,label:e}))}),(0,v.jsxs)(`div`,{className:a.heatLossCalculator__field,children:[(0,v.jsx)(`label`,{className:a.heatLossCalculator__field_label,children:`heat transfer coefficient h`}),(0,v.jsx)(`span`,{className:a.helpTextTall,children:`convection + surface radiation; can be calculated`}),(0,v.jsxs)(`div`,{className:a.heatLossCalculator__field_group,children:[(0,v.jsx)(`input`,{type:`number`,value:x,readOnly:!0,className:`${a.heatLossCalculator__field_input} ${a.heatLossCalculator__field_input_readonly}`,step:`0.001`}),(0,v.jsx)(`button`,{onClick:q,className:`${a.heatLossCalculator__button} ${a.heatLossCalculator__button_success}`,children:`calculate h`})]}),(0,v.jsx)(`span`,{className:a.heatLossCalculator__field_unit,children:`W/m²K`})]}),(0,v.jsx)(m,{label:`relative humidity (30%-95%)`,helpText:`for dew point calculation, %`,unit:`%`,value:j,onChange:M,styles:Z,inputProps:{min:30,max:95,step:.1}})]})]}),(0,v.jsxs)(`div`,{className:a.heatLossCalculator__section,children:[(0,v.jsx)(`h2`,{className:a.heatLossCalculator__section_title,children:`Results`}),(0,v.jsxs)(`div`,{className:a.heatLossCalculator__grid,children:[(0,v.jsxs)(`div`,{className:a.heatLossCalculator__field,children:[(0,v.jsx)(`label`,{className:a.heatLossCalculator__field_label,children:`dew point`}),(0,v.jsx)(`span`,{className:a.helpTextTall,children:`temperature at which condensation begins at current humidity`}),(0,v.jsx)(`input`,{type:`text`,value:L.dewpointTemperature.toFixed(2),readOnly:!0,className:`${a.heatLossCalculator__fieldInput} ${a.heatLossCalculator__fieldInput}--readonly`}),(0,v.jsx)(`span`,{className:a.heatLossCalculator__field_unit,children:`°C`})]}),(0,v.jsxs)(`div`,{className:a.heatLossCalculator__field,children:[(0,v.jsx)(`label`,{className:a.heatLossCalculator__field_label,children:`minimum insulation thickness`}),(0,v.jsx)(`span`,{className:a.helpTextTall,children:`calculated minimum thickness to prevent condensation`}),(0,v.jsx)(`input`,{type:`text`,value:L.minimumThickness.toFixed(3),readOnly:!0,className:`${a.heatLossCalculator__fieldInput} ${a.heatLossCalculator__fieldInput}--readonly`}),(0,v.jsx)(`span`,{className:a.heatLossCalculator__field_unit,children:`mm`})]})]})]}),(0,v.jsx)(s,{onCalculate:K,onHelp:J,onBack:X,styles:a,calculateLabel:`Calculate`})]})]}),(0,v.jsx)(y,{isOpen:B,onClose:()=>V(!1),ambientTemp:n,mediumTemp:r,tubeDiameter:u,material:b,modalParams:H,setModalParams:U,onCalculate:Y,applySafetyFactor:N,setApplySafetyFactor:P,useAdvancedAlgorithm:F,setUseAdvancedAlgorithm:I}),(0,v.jsx)(f,{isOpen:W,onClose:()=>G(!1)})]})};export{b as default};